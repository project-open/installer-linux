
<html><head>
<title>ns_adp_include - NaviServer Built-in Commands</title>
<link rel="stylesheet" href="../man.css" type="text/css">
</head>
<! -- Generated from file '/usr/local/src/naviserver/doc/html/naviserver/files/ns_adp_include.html' by tcllib/doctools with format 'html'
   -->
<! -- CVS: $Id$ ns_adp_include.n
   -->
<body><div class="doctools">
<div id="man-header">
  <a href="http://wiki.tcl.tk/2090"><img
     src="http://naviserver.sourceforge.net/ns-icon-16.png"> <strong>NaviServer</strong></a>
  - programmable web server
</div>
<br>
<hr> [
  <a href="../../toc.html">Main Table Of Contents</a>
| <a href="../toc.html">Table Of Contents</a>
| <a href="../../index.html">Keyword Index</a>
] <hr>
<h1 class="title">ns_adp_include(n) 4.99.8 naviserver &quot;NaviServer Built-in Commands&quot;</h1>
<div id="name" class="section"><h2><a name="name">Name</a></h2>
<p>ns_adp_include - Parse an ADP file and return its output</p>
</div>
<div id="toc" class="section"><h2><a name="toc">Table Of Contents</a></h2>
<ul class="toc">
<li class="section"><a href="#toc">Table Of Contents</a></li>
<li class="section"><a href="#synopsis">Synopsis</a></li>
<li class="section"><a href="#section1">Description</a></li>
<li class="section"><a href="#section2">COMMANDS</a></li>
<li class="section"><a href="#section3">EXAMPLES</a></li>
<li class="section"><a href="#see-also">See Also</a></li>
<li class="section"><a href="#keywords">Keywords</a></li>
</ul>
</div>
<div id="synopsis" class="section"><h2><a name="synopsis">Synopsis</a></h2>
<div class="synopsis">
<ul class="syntax">
<li><a href="#1"><b class="cmd">ns_adp_include</b> <span class="opt">?<i class="arg">-tcl</i>?</span> <span class="opt">?<i class="arg">-cache seconds</i>?</span> <span class="opt">?<i class="arg">-nocache</i>?</span> <i class="arg">file</i> <span class="opt">?arg ...?</span></a></li>
</ul>
</div>
</div>
<div id="section1" class="section"><h2><a name="section1">Description</a></h2>
<p>This command parses the specified file as an ADP, including the
text blocks and any output generated by script blocks in the current
output buffer.  The execution occurs in a new call frame with private
local variables similar to a Tcl procedure.  The filename is
the file containing the ADP to be parsed.  If the file is not an
absolute filename, the file is considered relative to the current
ADP working directory which is the directory of the previously
included file.  Optional arguments (arg...) can be passed to
the included ADP; see the ns_adp_argv command above for details
on accessing the values of these variables.  The optional -cache
seconds argument specifies the time to cache the results of
execution.  All output generated by any scripts and included ADP's
are saved for subsequent requests unless an included ADP has a
-nocache option.  The use of -cache and -nocache can be used to 
increase performance of ADP used to generated a mix
of personalized, non-cacheable, content and shared content which
changes more slowly.  Under high load, the performance improvement
can be substaintial, especially in cases where the cached content
is the result of accessing a slow databases or web services.  See
the EXAMPLES section for an example of using cached output.</p>
<p>ADPs can be nested by including each other up to the maximum of 256 levels deep.</p>
<p>This command is only available from an ADP.  Use ns_adp_parse to parse ADPs
from outside the context of an ADP.</p>
</div>
<div id="section2" class="section"><h2><a name="section2">COMMANDS</a></h2>
<dl class="definitions">
<dt><a name="1"><b class="cmd">ns_adp_include</b> <span class="opt">?<i class="arg">-tcl</i>?</span> <span class="opt">?<i class="arg">-cache seconds</i>?</span> <span class="opt">?<i class="arg">-nocache</i>?</span> <i class="arg">file</i> <span class="opt">?arg ...?</span></a></dt>
<dd><p><i class="arg">-tcl</i>
Given file is .tcl file and should be wrapped into ADP page
<i class="arg">-nocache</i>
Do not cache ADP page results
<i class="arg">-cache seconds</i>
Cache results for this amount of time</p></dd>
</dl>
</div>
<div id="section3" class="section"><h2><a name="section3">EXAMPLES</a></h2>
<pre class="example">
    ###
    ### Example #1: Callee outputs directly to ADP output buffer.
    ###
    # In a.adp:
    &lt;% ns_adp_include b.adp %&gt;
    # In b.adp:
    &lt;% ns_adp_puts &amp;quot;Hello, world!&amp;quot; %&gt;
    ###
    ### Example #2: Caller outputs to ADP buffer.
    ###
    # In a.adp:
    &lt;% ns_adp_puts ns_adp_include arg b.adp %&gt;
    # In b.adp:
    &lt;% return &amp;quot;Hello, world!&amp;quot; %&gt;
</pre>
</div>
<div id="see-also" class="section"><h2><a name="see-also">See Also</a></h2>
<p><a href="../../index.html#key3">nsd</a></p>
</div>
<div id="keywords" class="section"><h2><a name="keywords">Keywords</a></h2>
<p><a href="../../index.html#key15">ADP</a></p>
</div>
<div id="man-footer">
  
</div>
</div></body></html>
